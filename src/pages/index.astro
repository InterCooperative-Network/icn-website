---
// src/pages/index.astro
import Layout from '../layouts/Layout.astro';
import HeroSection from '../components/HeroSection.astro';
import FeatureCard from '../components/FeatureCard.astro';

// Homepage copy
const pageTitle = "ICN: A Substrate Daemon for the Cooperative Internet";
const pageDescription = "Infrastructure for timebanks, mutual credit systems, and cooperative coordination. 20 phases complete, 1,134+ tests passing.";

// Core features highlighting ICN's transformative vision with technical backing
const features = [
  {
    title: "Cooperative Contract Language (CCL)",
    description: "Program your bylaws, policies, and governance rules as executable code. CCL contracts replace statutes with transparent, verifiable, and democratic decision-making that scales from housing cooperatives to global federations.",
    iconName: "code"
  },
  {
    title: "Cooperative Economics Engine",
    description: "Built-in mutual credit, time banking, local currencies, and profit-sharing. Mana prevents speculation while enabling fair resource allocation across cooperative networks and mutual aid systems.",
    iconName: "lightbulb"
  },
  {
    title: "Federated Governance",
    description: "Autonomous cooperatives maintain sovereignty while participating in larger federations. Democratic decision-making with liquid delegation that scales from local worker coops to global climate action networks.",
    iconName: "users"
  },
  {
    title: "Verifiable Everything",
    description: "Every governance decision, economic transaction, and cooperative action creates cryptographic receipts anchored in a content-addressable DAG. Full transparency without blockchain energy waste.",
    iconName: "document-text"
  },
  {
    title: "Cooperative Identity & Trust",
    description: "Self-sovereign identity enables participation across multiple cooperatives and federations. Zero-knowledge proofs for privacy-preserving membership verification and reputation tracking.",
    iconName: "network-nodes"
  },
  {
    title: "Mesh Compute Cooperation",
    description: "Share computing resources democratically across cooperatives. WASM-sandboxed job execution with reputation-based assignment for everything from data processing to AI model training.",
    iconName: "chat-bubble"
  }
];

// Real-world cooperative applications
const cooperativeApps = [
  {
    title: "Housing Cooperatives",
    description: "Program rent control policies, maintenance coordination, democratic tenant decision-making, and conflict resolution. CCL contracts encode housing cooperative bylaws with automatic execution.",
    icon: "üè†",
    examples: ["Rent stabilization algorithms", "Maintenance request workflows", "Tenant voting on improvements", "Anti-speculation enforcement"]
  },
  {
    title: "Worker Cooperatives", 
    description: "Democratic workplace governance with programmable profit-sharing, labor coordination, and workplace justice. Transparent decision-making from daily operations to strategic planning.",
    icon: "üë•",
    examples: ["Profit distribution algorithms", "Democratic work scheduling", "Workplace conflict mediation", "Skills-based job assignment"]
  },
  {
    title: "Cooperative Banking",
    description: "Mutual credit systems, community currencies, time banking, and cooperative loans. Enable local economic self-determination with built-in risk management and democratic oversight.",
    icon: "üè¶",
    examples: ["Local currency issuance", "Mutual credit clearing", "Time bank exchanges", "Democratic loan approval"]
  },
  {
    title: "Mutual Aid Networks",
    description: "Coordinate emergency response, resource sharing, and community care. Match needs with resources across neighborhoods and regions with transparent distribution algorithms.",
    icon: "ü§ù",
    examples: ["Emergency resource allocation", "Skill sharing networks", "Community care coordination", "Disaster response planning"]
  },
  {
    title: "Supply Chain Cooperatives",
    description: "Democratic purchasing, quality assurance, and supply chain transparency. Coordinate bulk buying, ethical sourcing, and cooperative ownership of supply chains.",
    icon: "üì¶",
    examples: ["Bulk purchasing coordination", "Supplier evaluation systems", "Quality assurance protocols", "Fair trade verification"]
  },
  {
    title: "Community Governance",
    description: "Participatory budgeting, community land trusts, and civic decision-making. Replace municipal bureaucracy with transparent, democratic, and accountable governance systems.",
    icon: "üèõÔ∏è",
    examples: ["Participatory budgeting", "Community land management", "Local resource allocation", "Civic project coordination"]
  }
];

// Organizational structure
const organizationalForms = [
  {
    title: "Cooperatives: Economic Engines",
    description: "Independent economic entities that run their own governance contracts, define decision-making via CCL, and handle production, labor, and services. They operate democratically by their members and can participate in federations for coordination and mutual aid.",
    icon: "üè≠"
  },
  {
    title: "Communities: Governance Bodies", 
    description: "Civic-focused entities like neighborhoods, towns, or bioregions that run constitutional governance contracts, manage public goods, coordinate mutual aid, and facilitate democratic participation through verified membership.",
    icon: "üèõÔ∏è"
  },
  {
    title: "Federations: Coordination Networks",
    description: "Networks that link cooperatives and communities using shared CCL contracts, enable resource sharing, facilitate conflict resolution, and coordinate large-scale actions like climate response or economic mutual aid.",
    icon: "üåê"
  }
];

// Current development capabilities
const capabilities = [
  {
    title: "Identity & Security",
    status: "‚úÖ Complete",
    description: "DIDs with Ed25519 cryptography, three-layer security (transport, message, application), DID-TLS binding with persistent certificates."
  },
  {
    title: "Trust & Economics",
    status: "‚úÖ Complete",
    description: "Web-of-participation trust graph, dynamic credit limits, mutual credit ledger with double-entry accounting and Merkle-DAG."
  },
  {
    title: "Networking & Gossip",
    status: "‚úÖ Complete",
    description: "QUIC/TLS secure sessions, mDNS discovery, gossip protocol with trust-gated topics, per-peer rate limiting."
  },
  {
    title: "Governance & Compute",
    status: "‚úÖ Complete",
    description: "Domain-based proposals with voting coordination, CCL smart contracts, distributed compute with trust-gated execution."
  },
  {
    title: "Pilot Web UI",
    status: "‚úÖ Complete",
    description: "Dashboard with balance tracking, member directory, governance voting, CSV export for treasurers, full mobile support."
  },
  {
    title: "Observability & Operations",
    status: "‚úÖ Complete",
    description: "Prometheus metrics, encrypted backup/restore, graceful restart with vector clock persistence, version negotiation."
  }
];

// Call-to-action section copy
const ctaTitle = "Build the Cooperative Future";
const ctaDescription = "Join cooperatives, communities, and federations building post-capitalist infrastructure. Program your governance, democratize your economics, and own the systems that shape your world.";

---

<Layout title={pageTitle} description={pageDescription}>
  <HeroSection />
  
  <!-- Features Section -->
  <section id="features" class="py-20 bg-bg-secondary">
    <div class="container mx-auto px-6">
      <div class="text-center mb-16">
        <h2 class="text-4xl font-bold mb-6">Beyond Web3: Cooperative Infrastructure</h2>
        <p class="text-xl text-light-slate max-w-4xl mx-auto">
          ICN isn't just another blockchain or crypto project. It's programmable infrastructure for cooperatives, 
          communities, and federations to govern themselves democratically, coordinate economically, 
          and replace extractive systems with cooperative ownership.
        </p>
      </div>
      
      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
        {features.map((feature) => (
          <FeatureCard 
            title={feature.title}
            description={feature.description}
            iconName={feature.iconName}
          />
        ))}
      </div>
    </div>
  </section>

  <!-- Real-World Applications -->
  <section class="py-20">
    <div class="container mx-auto px-6">
      <div class="text-center mb-16">
        <h2 class="text-4xl font-bold mb-8">What Cooperatives Can Build</h2>
        <p class="text-xl text-light-slate max-w-4xl mx-auto">
          ICN provides the infrastructure for cooperatives to program their own governance, 
          manage their economics democratically, and coordinate across federations. 
          Here's what becomes possible.
        </p>
      </div>
      
      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
        {cooperativeApps.map((app) => (
          <div class="bg-midnight-navy/30 p-6 rounded-lg border border-accent-primary/20 hover:border-accent-primary/40 transition-colors">
            <div class="text-4xl mb-4 text-center">{app.icon}</div>
            <h3 class="text-xl font-bold text-white mb-3 text-center">{app.title}</h3>
            <p class="text-light-slate mb-4 leading-relaxed">{app.description}</p>
            <div class="space-y-2">
              <h4 class="text-sm font-semibold text-accent-primary">Examples:</h4>
              <ul class="text-sm text-slate-400 space-y-1">
                {app.examples.map((example) => (
                  <li>‚Ä¢ {example}</li>
                ))}
              </ul>
            </div>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- Architecture Overview -->
  <section class="py-20 bg-bg-secondary">
    <div class="container mx-auto px-6">
      <div class="max-w-4xl mx-auto text-center">
        <h2 class="text-4xl font-bold mb-8">Revolution as Design Problem</h2>
        <p class="text-xl text-light-slate mb-12">
          ICN treats systemic transformation as an infrastructure challenge. We're not just building 
          software‚Äîwe're architecting the foundations for a cooperative, democratic, and regenerative civilization.
        </p>
        
        <div class="grid md:grid-cols-2 gap-8 text-left">
          <div class="bg-midnight-navy/50 p-8 rounded-lg border border-red-400/30">
            <h3 class="text-2xl font-bold text-red-300 mb-4">What ICN Replaces</h3>
            <ul class="text-light-slate space-y-2">
              <li>‚ùå Corporate platforms with cooperative apps</li>
              <li>‚ùå Bureaucratic governance with programmable democracy</li>
              <li>‚ùå Extractive finance with cooperative banking</li>
              <li>‚ùå Isolated cooperatives with federated networks</li>
            </ul>
          </div>
          
          <div class="bg-midnight-navy/50 p-8 rounded-lg border border-accent-primary/30">
            <h3 class="text-2xl font-bold text-accent-primary mb-4">What ICN Enables</h3>
            <ul class="text-light-slate space-y-2">
              <li>‚úÖ Programmable governance with CCL contracts</li>
              <li>‚úÖ Cooperative economics with mana and mutual credit</li>
              <li>‚úÖ Democratic decision-making at any scale</li>
              <li>‚úÖ Transparent, verifiable, and accountable systems</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Organizational Forms -->
  <section class="py-20">
    <div class="container mx-auto px-6">
      <div class="text-center mb-16">
        <h2 class="text-4xl font-bold mb-6">Cooperatives, Communities & Federations</h2>
        <p class="text-xl text-light-slate max-w-3xl mx-auto">
          ICN recognizes three distinct but interoperable organizational forms, each with their own 
          governance patterns and economic relationships, all programmable through CCL contracts.
        </p>
      </div>
      
      <div class="space-y-8">
        {organizationalForms.map((form) => (
          <div class="border-l-4 border-accent-primary pl-8 bg-midnight-navy/30 p-6 rounded-lg">
            <div class="flex items-start space-x-4">
              <div class="text-4xl">{form.icon}</div>
              <div>
                <h3 class="text-2xl font-bold text-white mb-3">{form.title}</h3>
                <p class="text-light-slate leading-relaxed">{form.description}</p>
              </div>
            </div>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- Technical Architecture Deep Dive -->
  <section class="py-20 bg-bg-secondary">
    <div class="container mx-auto px-6">
      <div class="max-w-4xl mx-auto">
        <h2 class="text-4xl font-bold text-center mb-12">Core Architecture: Consciousness Infrastructure</h2>
        
        <div class="grid md:grid-cols-2 gap-8 mb-12">
          <div class="bg-soft-black/70 p-6 rounded-lg border border-accent-primary/20">
            <h3 class="text-xl font-semibold mb-3 text-accent-primary">Cooperative Contract Language (CCL)</h3>
            <p class="text-light-slate">
              A deterministic programming language for encoding legal contracts, governance bylaws, and economic rules. 
              CCL contracts are legally binding, cryptographically verifiable, and executable across federated nodes.
              Complete 1,200+ line specification with WASM compilation.
            </p>
          </div>
          
          <div class="bg-soft-black/70 p-6 rounded-lg border border-accent-blue/20">
            <h3 class="text-xl font-semibold mb-3 text-accent-blue">Federated Governance</h3>
            <p class="text-light-slate">
              Proposals, voting, delegation, and policy execution with liquid democracy support. 
              Democratic decision-making that scales from housing cooperatives to global climate action federations 
              with transparent audit trails.
            </p>
          </div>
          
          <div class="bg-soft-black/70 p-6 rounded-lg border border-accent-purple/20">
            <h3 class="text-xl font-semibold mb-3 text-accent-purple">Cooperative Economics</h3>
            <p class="text-light-slate">
              Mana for computational access, mutual credit systems, time banking, local currencies, and profit-sharing algorithms. 
              Built-in economic primitives that prevent speculation while enabling cooperative coordination.
            </p>
          </div>
          
          <div class="bg-soft-black/70 p-6 rounded-lg border border-accent-glow/20">
            <h3 class="text-xl font-semibold mb-3 text-accent-glow">Mesh Computing Network</h3>
            <p class="text-light-slate">
              Distributed job execution with reputation-based assignment and WASM sandboxing. 
              Cooperatives can share computing resources democratically for data processing, AI training, 
              and collaborative work across the federation.
            </p>
          </div>
        </div>

        <div class="bg-gradient-to-r from-accent-primary/10 to-accent-blue/10 p-8 rounded-lg border border-accent-glow/30">
          <h3 class="text-2xl font-bold text-center mb-4 text-accent-glow">Post-State Infrastructure</h3>
          <p class="text-lg text-light-slate text-center">
            ICN recognizes that <strong>infrastructure is ideology made manifest</strong>. Every protocol decision 
            embodies values about how power should be distributed, how decisions should be made, and how value 
            should flow. We're building infrastructure for a cooperative future.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- Current Development Status -->
  <section class="py-20">
    <div class="container mx-auto px-6">
      <div class="text-center mb-16">
        <h2 class="text-4xl font-bold mb-6">Development Status</h2>
        <p class="text-xl text-light-slate max-w-3xl mx-auto">
          20 development phases complete with 1,134+ passing tests.
        </p>
      </div>
      
      <div class="space-y-6 max-w-4xl mx-auto">
        {capabilities.map((capability) => (
          <div class="bg-midnight-navy/30 p-6 rounded-lg border-l-4 border-accent-primary">
            <div class="flex items-start justify-between">
              <div>
                <h3 class="text-xl font-bold text-white mb-2">{capability.title}</h3>
                <p class="text-light-slate">{capability.description}</p>
              </div>
              <div class="text-accent-primary font-semibold text-sm whitespace-nowrap ml-4">
                {capability.status}
              </div>
            </div>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- Guiding Principles -->
  <section class="py-20 bg-bg-secondary">
    <div class="container mx-auto px-6">
      <div class="max-w-4xl mx-auto">
        <h2 class="text-4xl font-bold text-center mb-12">Guiding Principles</h2>
        
        <div class="grid md:grid-cols-2 gap-8">
          <div class="space-y-6">
            <div class="flex items-start space-x-4">
              <div class="bg-accent-primary/20 p-3 rounded-lg">
                <span class="text-2xl">üîê</span>
              </div>
              <div>
                <h3 class="text-xl font-bold mb-2">Cooperative Sovereignty</h3>
                <p class="text-light-slate">
                  Every cooperative, community, and federation maintains full sovereignty over their governance, 
                  economics, and decision-making while participating in larger federated networks.
                </p>
              </div>
            </div>
            
            <div class="flex items-start space-x-4">
              <div class="bg-accent-blue/20 p-3 rounded-lg">
                <span class="text-2xl">‚öñÔ∏è</span>
              </div>
              <div>
                <h3 class="text-xl font-bold mb-2">Programmable Democracy</h3>
                <p class="text-light-slate">
                  Governance rules are encoded in CCL contracts‚Äîtransparent, versioned, and executable code 
                  that enables democratic evolution of cooperative policies and bylaws.
                </p>
              </div>
            </div>
            
            <div class="flex items-start space-x-4">
              <div class="bg-accent-purple/20 p-3 rounded-lg">
                <span class="text-2xl">üå±</span>
              </div>
              <div>
                <h3 class="text-xl font-bold mb-2">Regenerative Economics</h3>
                <p class="text-light-slate">
                  Economic systems designed for cooperation, not extraction. Mutual credit, time banking, 
                  and profit-sharing algorithms that strengthen communities and cooperative networks.
                </p>
              </div>
            </div>
          </div>
          
          <div class="space-y-6">
            <div class="flex items-start space-x-4">
              <div class="bg-accent-glow/20 p-3 rounded-lg">
                <span class="text-2xl">üïäÔ∏è</span>
              </div>
              <div>
                <h3 class="text-xl font-bold mb-2">Restorative Justice</h3>
                <p class="text-light-slate">
                  Conflict resolution through programmable mediation and community-driven healing processes. 
                  Democratic accountability that prioritizes restoration over punishment.
                </p>
              </div>
            </div>
            
            <div class="flex items-start space-x-4">
              <div class="bg-accent-primary/20 p-3 rounded-lg">
                <span class="text-2xl">üèóÔ∏è</span>
              </div>
              <div>
                <h3 class="text-xl font-bold mb-2">Federation Networks</h3>
                <p class="text-light-slate">
                  Cooperatives coordinate through federated networks for resource sharing, mutual aid, 
                  and large-scale action while maintaining local autonomy and democratic control.
                </p>
              </div>
            </div>
            
            <div class="flex items-start space-x-4">
              <div class="bg-accent-blue/20 p-3 rounded-lg">
                <span class="text-2xl">üõ°Ô∏è</span>
              </div>
              <div>
                <h3 class="text-xl font-bold mb-2">Cooperative Ownership</h3>
                <p class="text-light-slate">
                  Infrastructure owned and controlled by the cooperatives that use it. 
                  Democratic governance of the platform itself through federated decision-making.
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Philosophical Foundation -->
  <section class="py-20">
    <div class="container mx-auto px-6">
      <div class="max-w-4xl mx-auto text-center">
        <h2 class="text-4xl font-bold mb-8">The "Debugging Civilization" Framework</h2>
        <p class="text-xl text-light-slate mb-8">
          ICN emerges from a comprehensive critique of extractive capitalist systems 
          and offers cooperative infrastructure as the regenerative alternative. This philosophy is explored 
          in depth through the "Debugging Civilization" essay series.
        </p>
        
        <div class="bg-gradient-to-r from-accent-primary/10 via-accent-blue/10 to-accent-purple/10 p-8 rounded-lg">
          <blockquote class="text-2xl font-semibold text-accent-glow mb-4">
            "Revolution is a design problem solvable through participatory, federated infrastructure 
            rooted in dignity and regeneration."
          </blockquote>
          <p class="text-light-slate">
            The core insight that systemic transformation requires not just critique, but the actual 
            construction of alternative systems that embody cooperative values.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- Call to Action -->
  <section class="py-20 bg-gradient-to-r from-accent-primary/10 via-accent-blue/10 to-accent-purple/10">
    <div class="container mx-auto px-6 text-center">
      <h2 class="text-4xl font-bold mb-6">{ctaTitle}</h2>
      <p class="text-xl text-light-slate mb-8 max-w-3xl mx-auto">
        {ctaDescription}
      </p>
      
      <div class="flex flex-col sm:flex-row gap-4 justify-center">
        <a href="/get-started" class="btn btn-primary text-lg px-8 py-4">
          Get Started
          <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
          </svg>
        </a>
        <a href="/docs" class="btn btn-secondary text-lg px-8 py-4">
          Read Documentation
          <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
          </svg>
        </a>
        <a href="https://github.com/InterCooperative-Network/icn" class="btn btn-secondary text-lg px-8 py-4" target="_blank" rel="noopener noreferrer">
          View Source Code
          <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
          </svg>
        </a>
      </div>

      <!-- Key Statistics -->
      <div class="grid md:grid-cols-4 gap-8 mt-16 pt-16 border-t border-white/10">
        <div class="text-center">
          <div class="text-3xl font-bold text-accent-primary mb-2">20</div>
          <div class="text-light-slate">Phases Complete</div>
        </div>
        <div class="text-center">
          <div class="text-3xl font-bold text-accent-blue mb-2">1,134+</div>
          <div class="text-light-slate">Tests Passing</div>
        </div>
        <div class="text-center">
          <div class="text-3xl font-bold text-accent-purple mb-2">16</div>
          <div class="text-light-slate">Specialized Crates</div>
        </div>
        <div class="text-center">
          <div class="text-3xl font-bold text-accent-glow mb-2">PILOT</div>
          <div class="text-light-slate">Ready Status</div>
        </div>
      </div>
    </div>
  </section>
</Layout>

<style>
  .btn {
    @apply inline-flex items-center justify-center font-semibold rounded-lg transition-all duration-300 no-underline;
  }
  
  .btn-primary {
    @apply bg-accent-primary text-midnight-navy hover:scale-105 shadow-lg hover:shadow-xl;
  }
  
  .btn-primary:hover {
    background-color: #00c299; /* Slightly darker shade of accent-primary */
  }
  
  .btn-secondary {
    @apply bg-transparent text-accent-primary border-2 border-accent-primary hover:bg-accent-primary hover:text-midnight-navy;
  }
</style>
